> SK네트웍스 Family AI 캠프 21기 3차 프로젝트  
> 개발기간: 26.01.07 ~ 26.01.08 <br>
> 주제 : RAG 기반 챗봇 개발

<br>

# 🖐️ 팀 소개

- ## 팀명 : **이명준(님) 짝꿍 구하기**
- ### 팀원 소개 :

<div align="center">
	
| [@김승룡] | [@정덕규] | [@이의정] | [@진승언] | [@이명준] |
| :----------------------------------------: | :----------------------------------------: | :----------------------------------------: | :----------------------------------------: | :----------------------------------------: |
| <img src="data/image/BSJ.png" width="120"> | <img src="data/image/PSH.png" width="120"> | <img src="data/image/LSW.png" width="120"> | <img src="data/image/KSU.png" width="120"> | <img src="data/image/PJH.png" width="120"> |

</div>

<br>

---

# 📖 프로젝트 개요

##  주제 : 선사시대부터 가장 중요했던 연애!, <br> 어떻게 하면 더 나은 연애를 할 수 있을지 상담해주는 AI 기반의 '연애 상담' 챗봇 서비스

- ###  **프로젝트 소개**

"**명준(님) 짝꿍구하기**"는 사용자의 연애에 대한 고민을 상담해주는 AI 대화형 챗봇 서비스입니다.  
**연애를 하면서 생기는 다양한 상황과 질문에 대한 답변를 RAG 기반으로 안내**하며  
**사용자가 선호하는 연애 유튜버의 말투로 답변**합니다.

- ###  **프로젝트 배경**

"연애를 하다보면, 또는 연애를 시작하려고 하면<br>
남들에게 물어보기도 어려운 다양한 상황에 직면하게 됩니다.<br>
이럴 때 저희 AI 챗봇에 물어보면 됩니다.."<br>

## 관련 기사

### ■ 모쏠 공대남, 5천명과 미팅 후 결혼까지…챗GPT가 다 했다


<img src="[data/image/news1.png](https://www.asiae.co.kr/news/img_view.htm?img=2024020108320550685_1706743925.jpg)">

- 러시아 개발자, AI로 '데이트 최적화' 프로포즈, 결혼 계획까지 AI에 맡겨

[https://www.asiae.co.kr/article/2024020110103092016](https://www.asiae.co.kr/article/2024020110103092016)
##### 출처: 아시아경제

<br>

#### => 연애는 하고 싶지만, 어떻게 해야할지 모르고, 어떤 얘기를 해야할지 모르겠는 사람이 많음.
	
### "이러한 배경에서 저희는 **연애 전문가(연애 유튜브)의 말투로 상황에 따른 대답을 해주는 AI 챗봇의 필요성**을 느끼고 도움을 줄 수 있는 챗봇을 구상하게 되었습니다."

- ### **프로젝트 목표**

1.  **핵심 정보 제공**: 연애하면서 맞닥뜨리게 되는 다양한 상황에 대한 대처법을 정확하게 답변해줌
    
2.  **맞춤형 대화**: 감정·기억을 반영한 개인화된 상담 제공
    
3.  **RAG 기반 정확성 향상**: GPT-4o-mini + Qdrant으로 근거 기반 답변 생성
    
4.  **명준(님), 의정(님) 짝꿍 구하기**: 명준(님)과 의정(님)의 여자친구, 남자친구를 구하는 것이 최종적인 프로젝트의 목적 입니다.

<br>

---

# 💻 기술 스택 & 사용한 모델  

| 분야                | 사용 도구 |
|---------------------|-----------|
| **Language**        | [![Python](https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=Python&logoColor=white)](https://www.python.org/) |
| **Collaboration Tool** | [![Git](https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=git&logoColor=white)](https://git-scm.com/) [![GitHub](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white)](https://github.com/) [![Notion](https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=notion&logoColor=white)](https://www.notion.so/) [![Discord](https://img.shields.io/badge/Discord-5865F2?style=for-the-badge&logo=discord&logoColor=white)](https://discord.com/) |
| **LLM Model**       | [![GPT-4o](https://img.shields.io/badge/GPT--4o-mini%20-412991?style=for-the-badge&logo=openai&logoColor=white)](https://platform.openai.com/) 
| **Embedding Model** | [![text-embedding-3-small](https://img.shields.io/badge/text--embedding--3--small-00A67D?style=for-the-badge&logo=openai&logoColor=white)](https://platform.openai.com/docs/guides/embeddings) |
| **Vector DB**       | [![Pinecone](https://img.shields.io/badge/qdrant-0075A8?style=for-the-badge&logo=qdrant&logoColor=white)](https://qdrant.tech/) |
| **Orchestration / RAG** | [![LangChain](https://img.shields.io/badge/LangChain-1C3C3C?style=for-the-badge&logo=langchain&logoColor=white)](https://www.langchain.com/) [![LangGraph](https://img.shields.io/badge/LangGraph-000000?style=for-the-badge)](https://langchain-ai.github.io/langgraph/) |
| **Development Env** | [![VS Code](https://img.shields.io/badge/VS%20Code-007ACC?style=for-the-badge&logo=visualstudiocode&logoColor=white)](https://code.visualstudio.com/) [![Conda](https://img.shields.io/badge/Conda-3EB049?style=for-the-badge&logo=anaconda&logoColor=white)](https://www.anaconda.com/)

<br>

---

# 🪢시스템 아키텍처

### 프로젝트 구조

<img src="https://discord.com/channels/1455821809193713686/1455836066329264191/1458260754330292443">

<br>


### 시스템 아키텍처 구조도
![시스템 아키텍처](https://github.com/user-attachments/assets/32442d92-867c-4628-a05f-2cd595884a7f)




<br>

---

# 📅 WBS

<img src="data/image/wbs-preview.png" width="700">

<br>

---

# *️⃣ 요구사항 명세서

### 기능 요구 사항

| ID | 기능명 | 기능 설명 | 우선순위 | 평가기준 | 평가 |
|---|---|---|---|---|---|
| FR-01 | 사용자 질문 처리 | 사용자 질문을 분석하여 의도를 파악한다 | High | 테스트 질문 30개 중, 의도 분석(정보 검색/감정 대화 구분) 성공률 90% 이상<br>핵심 키워드 추출 정확도 80% 이상 | ○ |
| FR-02 | RAG 기반 정보 검색 | 질문 분석 결과를 기반으로 Vector DB(Pinecone)에서 <br>적합한 문서를 검색하여 정확도가 가장 높은 정보를 선택해야 한다 | High | 검색 Top-3 내에 정답 문서가 포함될 확률 80% 이상<br>검색된 문서의 관련성 점수(similarity score) 0.5 이상 유지 | ○ |
| FR-03 | 감정 기반 맞춤 대화 | 사용자의 발화에서 감정 데이터를 추출하고 그에 맞는 답변을 생성해야 한다 | Medium | 감정 분류 정확도 80% 이상<br>감정 기반 답변 생성 시 톤/스타일 오류 비율 10% 이하 | ○ |
| FR-04 | 세션 및 기록 관리 | 세션별로 대화 기록을 저장하고 이전 발화를 반영하여 답변을 생성해야 한다 | Medium | 10개 세션 테스트 시, 세션 기록 생성 성공률 100%<br>동일 세션 내에서 직전 발화를 반영한 답변 비율 95% 이상 | ○ |
| FR-05 | 예외 상황 처리 | 상황에 따라 검색 결과 없음, DB 연동 실패 시 <br>메세지 제공 같은 예외 처리 및 오류 안내 기능이 출력되어야 한다 | High | DB 연결 오류 발생 시 안내 메시지가 100% 출력<br>예외 발생 시 시스템 비정상 작동(응답 미출력) 가능성 0건 | ○ |

### 비기능 요구 사항

| ID | 기능명 | 기능 설명 | 우선순위 | 평가기준 | 평가 |
|---|---|---|---|---|---|
| NFR-01 | 성능 | 사용자의 질문에 대해 RAG 검색 및 답변 생성을 포함한 전체 응답 시간을<br>평균 5초 이내로 유지해야 한다 | High | 50개 이상의 테스트 질문에 대해 전체 응답 시간 평균 5초 이내<br>응답 시간이 10초를 초과하는 요청 비율 5% 이하 | X(응답 속도 개선 요망) |
| NFR-02 | 정확성·신뢰성 | 시스템은 내부·외부 문서를 기반으로 정보를 제공할 때<br>근거 문서와 모순되는 사실 오류를 최소화해야 한다 | High | 테스트용 질문 50개 중 사실 오류가 포함된 응답 2건 이하<br>출처 또는 근거 문장을 함께 제시한 응답 비율 90% 이상 | ○ |
| NFR-03 | 사용성 | UI는 고령층 사용자도 혼자 사용할 수 있을 정도로 단순하고 직관적이어야 하며<br>글자 크기와 대비가 충분해야 한다 | Medium | 핵심 기능(입력창, 전송 버튼 등)은 한 화면 내에서 모두 보일 것<br>기본 폰트 크기 14pt 이상, 주요 안내 문구 16pt 이상 | X(폰트 크기 개선 요망) |

<br>

---

# 🗃️ 수집한 데이터 및 전처리 요약

### 수집한 데이터 목록

<details>
<summary>장례 관련</summary>

#### 도움받을 수 있는 연락처

-   장례문화진흥원 02-6930-9300
-   e하늘 장사 관련상담 1577-4129
-   장례지원 비영리단체 나눔과나눔 02-6455-3411

#### 전국 공영 장례
[https://www.15774129.go.kr/portal/counsel/bbs/list.do?menuId=M0009000800000000#{"page":1}](https://www.15774129.go.kr/portal/counsel/bbs/list.do?menuId=M0009000800000000#%7B%22page%22:1%7D)

전국 공영장례 조례집(서울 인천 경기).pdf

전국 화장장려금 조례집.pdf

#### 장례식장 / 화장시설 / 묘지 / 봉안 시설 / 자연 장지 시설 전국 API**
https://www.data.go.kr/data/15122367/openapi.do
https://www.data.go.kr/data/15122369/openapi.do
https://www.data.go.kr/data/15122364/openapi.do
https://www.data.go.kr/data/15122365/openapi.do
https://www.data.go.kr/data/15122366/openapi.do
</details>
<br>
<details>
<summary>유산 관련</summary>

#### 행정안전부_기부관련단체정보서비스 API
    
   [https://www.data.go.kr/data/15000374/openapi.do?recommendDataYn=Y](https://www.data.go.kr/data/15000374/openapi.do?recommendDataYn=Y)
    

----------

#### 한국 노인들의 유산상속 동기
    
   [https://www.kihasa.re.kr/hswr/assets/pdf/1041/journal-37-3-36.pdf](https://www.kihasa.re.kr/hswr/assets/pdf/1041/journal-37-3-36.pdf)
    
####  상속 재산 배분에 미치는 영향 요인 분석
    
   [https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4380371](https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4380371)
    

----------

####   사망자의 디지털 유산(개인정보, 계정, 게시물 등) 처리방안 연구
    
   [https://www.kmcc.go.kr/user.do;jsessionid=sII8tJ2Ye05YDWIfo_qxiCywsFNSflOY3bRFvxmC.servlet-aihgcldhome20?mode=view&page=A02160000&dc=K02160000&boardId=1022&cp=31&nop=10&boardSeq=34052](https://www.kmcc.go.kr/user.do;jsessionid=sII8tJ2Ye05YDWIfo_qxiCywsFNSflOY3bRFvxmC.servlet-aihgcldhome20?mode=view&page=A02160000&dc=K02160000&boardId=1022&cp=31&nop=10&boardSeq=34052)

[https://journal.kiso.or.kr/?p=11475](https://journal.kiso.or.kr/?p=11475)
</details>
<br>
<details>
<summary>사이버 개인정보 처리 관련</summary>

### 카카오톡 :

-   추모 프로필 기능
	[https://www.kakaocorp.com/page/detail/10876?utm_source=chatgpt.com](https://www.kakaocorp.com/page/detail/10876?utm_source=chatgpt.com)

-   카카오톡 계정 탈퇴 순서 및 유의 사항
    
    카카오톡 계정 탈퇴 진행 순서 및 유의사항.md(여기에 문서 추가)
    

### 네이버 :

-   사망자 아이디 탈퇴 요청 : 회원정보 고객센터
	[https://help.naver.com/service/5640/contents/17441?utm_source=chatgpt.com&osType=COMMONOS](https://help.naver.com/service/5640/contents/17441?utm_source=chatgpt.com&osType=COMMONOS)

-   네이버 계정 탈퇴 순서 및 안내 사항
	[https://help.naver.com/service/5640/contents/1435?osType=PC&lang=ko](https://help.naver.com/service/5640/contents/1435?osType=PC&lang=ko)

	[회원 탈퇴 시 확인해야 하는 사항 안내](https://help.naver.com/service/5640/contents/9545?lang=ko&osType=COMMONOS)

### 유튜브(구글 포함) :

-   Google 휴면계정 정책
	[https://support.google.com/accounts/answer/12418290?hl=ko&utm_source=chatgpt.com](https://support.google.com/accounts/answer/12418290?hl=ko&utm_source=chatgpt.com)

-   구글 계정 탈퇴 안내 사항
	[https://support.google.com/accounts/answer/32046?hl=ko](https://support.google.com/accounts/answer/32046?hl=ko)

### 쿠팡 등 온라인 쇼핑몰 :

-   대부분 온라인 쇼핑몰의 경우 사후 계정 처리에 대한 공식 안내가 존재하지 않음.

	[](https://tipoff-thanos.kr/entry/%EC%82%AC%EB%A7%9D-%ED%9B%84-%EC%98%A8%EB%9D%BC%EC%9D%B8-%EC%87%BC%ED%95%91-%EA%B3%84%EC%A0%95%EA%B3%BC-%ED%8F%AC%EC%9D%B8%ED%8A%B8%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%90%A0%EA%B9%8C-1?utm_source=chatgpt.com)[https://tipoff-thanos.kr/entry/사망-후-온라인-쇼핑-계정과-포인트는-어떻게-될까-1?utm_source=chatgpt.com](https://tipoff-thanos.kr/entry/%EC%82%AC%EB%A7%9D-%ED%9B%84-%EC%98%A8%EB%9D%BC%EC%9D%B8-%EC%87%BC%ED%95%91-%EA%B3%84%EC%A0%95%EA%B3%BC-%ED%8F%AC%EC%9D%B8%ED%8A%B8%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%90%A0%EA%B9%8C-1?utm_source=chatgpt.com)

- 쿠팡은 모바일 앱으로 계정 삭제가 불가하여 PC 웹사이트 이용 필수

	[https://login.coupang.com/login/secession.pang](https://login.coupang.com/login/secession.pang)

### 내 개인정보 현황 확인 및 관리 도움이 되는 사이트 :

-   개인정보 포털 : **정보주체 권리행사 서비스**
- 본인확인 후 사용 내역 조회 및 웹사이트에 대한 탈퇴 지원 서비스 제공
[https://www.privacy.go.kr/front/contents/cntntsView.do?contsNo=196](https://www.privacy.go.kr/front/contents/cntntsView.do?contsNo=196) 

</details>
<br>
<details>
<summary>감정적인 대화 관련</summary>

####   호스피스·완화의료 영적돌봄 가이드라인
   -   환자의 정신적 고통, 삶의 의미와 목적, 관계에 대해 어떻게 접근하고 대화해야 하는지 구체적인 지침
   🔗 [호스피스·완화의료 영적돌봄 안내](https://pdfs.semanticscholar.org/6c44/803cd19ecb74c85baa935c5ce9a7fa7cbb80.pdf)
#### 호스피스·완화의료 환자/가족 상담 매뉴얼
   -   환자 및 보호자와 신뢰를 쌓고, 어려운 주제(임종 과정, 말기 섬망 등)에 대해 어떻게 소통하는지 실제적인 대화 예시와 원칙
    🔗 [한국호스피스·완화의료학회 자료](https://www.hospicecare.or.kr/board/download.php?code=conference&num=249)
#### 영국 생애말기 돌봄 전략 보고서
   -   생애 말기 돌봄의 질을 어떻게 관리하는지, 환자의 선택권과 존엄성을 보장하기 위한 전략
       🔗 [건강보험심사평가원 자료](https://repository.hira.or.kr/bitstream/2019.oak/986/2/%EC%98%81%EA%B5%AD%EC%9D%98%20%EC%83%9D%EC%95%A0%EB%A7%90%EA%B8%B0%20%EB%8F%8C%EB%B4%84%20%EC%A0%84%EB%9E%B5.pdf)
####   Conversation Project
   -   삶과 죽음에 대한 대화를 쉽게 접근하도록 돕고, 자신이 바라는 게 무엇인지를 사람들과 나누게 함
       🔗 [대화를 시작하는 방법 가이드(Starter Kit)](https://share.google/QPfN0cKwGjBgNuCNP)
       🔗 [요약 버전(Summary Sheet)](https://share.google/QPfN0cKwGjBgNuCNP)
       🔗 [나의 죽음을 말하는 법](https://theconversationproject.org/healthcareteamguide/)
####   미국 Five Wishes
   -   고객의 5가지 소원을 체크리스트로 정리 → 기관에서 상담 및 치료 근거로 활용
       🔗 [미시건 주립대학 산하 Sparrow 의료센터 제공 자료](https://www.uofmhealthsparrow.org/sites/default/files/2022-08/five-wishes-advanced-planning-guide.pdf)
 
</details>
<br>
<details>
<summary>안전 및 윤리 가드레일 데이터</summary>

[https://www.kakaocorp.com/page/detail/11567](https://www.kakaocorp.com/page/detail/11567) [https://huggingface.co/collections/kakaocorp/kanana-safeguard](https://huggingface.co/collections/kakaocorp/kanana-safeguard)

</details>
<br>
<details>
<summary>참고한 연구 및 글</summary>

#### 부정적 표현을 긍정적 관점으로 재구성한 NLP용 자료셋
    
[https://github.com/SALT-NLP/positive-frames](https://github.com/SALT-NLP/positive-frames)
    
#### 1,157명 대상, 다양한 긍정·부정 감정 유발 자극 + 심리생리학 신호 포함
    
   [https://www.nature.com/articles/s41597-021-01117-0](https://www.nature.com/articles/s41597-021-01117-0)
    
#### 긍정심리학 전략 기반으로 문장 리프레이밍된 자료셋
    
   [https://github.com/SALT-NLP/positive-frames](https://github.com/SALT-NLP/positive-frames)
    
#### 감정 유발 뉴스 소재 대화 + 감정·공감·성격 특성 포함
    
   [https://arxiv.org/abs/2205.12698](https://arxiv.org/abs/2205.12698)
    
#### 공감적 대화 데이터셋
    
   [https://github.com/facebookresearch/EmpatheticDialogues](https://github.com/facebookresearch/EmpatheticDialogues)

</details>

### 전처리 요약

#### 화장 장려금, 공영 장례 조례 관련

**활용 목적** : 지원 대상 등을 확인할 수 있는 신뢰성 있는 정보와 그에 대한구체적인 근거 제공

**전처리 목표** :
   - 공영 장례 조례(조례집에서 조례 관련만 사용)
      - 사용 : 지원대상, 지원내용, 지원신청 및 결정

   - 화장 장려금 조례(조례집에서 조례 관련만 사용)
      - 사용 : 지원대상, 지원 기준, 지원 방법, 장사시설

**데이터 수집 방법** : 조례집 pdf다운로드

<br>

조례집 전체에서 데이터를 추출했기 때문에, 지역별 조례 차이는 영향을 주지 않았으며 불필요한 ‘조례 방법 찾기’ 정보만 제거<br>
DB 적재 시에는 후속 검색과 필터링을 위해 지역 정보를 메타데이터로 추가했으며, 이 지역 값은 문서 내용에서 직접 추출하도록 구성

#### 장례 관련

**핵심 목표** : 전국 장사관련 시설에 대한 신뢰성 있는 정보 제공

**전처리 목표** : 단순히 형식을 맞추는 것에 더해 LLM이 데이터를 이해하고 검색할 수 있도록 설계

**데이터 수집 방법** : API 크롤링

- 전국 장사관련 지역 현황
    - 장례식장/화장시설/봉안당/자연장지/묘지

- 고려사항
    - 원본 데이터는 컬럼명이 제각각
        - 예: '시설명', '장례식장 이름'
    - 검색 시 우선도가 낮은 데이터(전화번호 등)가 노이즈로 작용할 우려
    - 원본 데이터에서 지역 표기의 일관성이 없음
        - '수원시'가 아닌 '수원시영통구'로 표기
    - 공영장례 지원은 공설 장례식장에서만 가능하므로 사설과 분리 필요

- 전처리 과정
    - 모든 파일의 컬럼을 통일
        - region, location, name, address 등
    - 주소 파싱(Heuristic)
        - 일반적인 한국 주소는 **앞의 두 단어**가 지역을 의미
        - address의 값을 띄어쓰기로 구분하여 region과 location을 확보
            - '경기도', '성남시분당구' → '경기도', '성남시'
    - 전화번호는 메타데이터로만 사용
    - 공/사설 여부 태깅
        - 타겟 문자: '(재)', '재단법인', '(주)', '(사)'
        - 'type' 필드를 추가하여 공/사설 여부 저장

<br>

#### 유산 관련

**데이터 수집** : 챗봇 이용자 중 유가족에게 필요한 정보인 ‘유산’, ‘유산상속’ 관련 데이터를 국가 법령 정보센터와 국세청에서 수집
- 국가 법령 정보센터 수집 자료
- 민법 문서 중 유산, 유산 상속 관련 PDF 문서 수집
- 상속세 및 증여세법 PDF 문서 수집
- 사망자 및 피후견인 등 재산조회 통합처리에 관한 기준 PDF 문서 수집
- 웹 스크래핑을 통한 자주 찾는 주제 + 콜센터 정보 수집
- 상속 증여 세금 상식 문서 1, 2

**전처리 목표**
PDF 파싱 라이브러리로 PyMuPDF를 사용.
노이즈 제거: 제어 문자, 불필요한 특수문자, 의미없는 공백 제거.
형태속 복원: PDF 레이아웃 때문에 끊어진 단어들(예: 상속\n권 → 상속권)을 복원하여 임베딩 왜곡 방지.
청킹
최대 500자 이내로 제한 (LLM 컨텍스트 효율)

**데이터 수집 방법** : 웹 스크래핑

<br>

#### 인터넷 계정 관리 관련

**핵심 목표:** : 자주 사용하는 인터넷 플랫폼 별 계정 처리 방법에 대한 정보 제공

**전처리 목표:** :
- 플랫폼 별 형식을 JSON 데이터를 통일하여 구조 일관성, 표기 방식 불일치 등 RAG 검색 품질에 문제될 요소 파악
- id, platform, service, scenario, title, category 등 공통 필드 구성

**데이터 수집 방법** : web 크롤링

<br>

---

# 💾DB 연동 구현 코드

[연동 구현 코드](https://github.com/SKN19-3rd-4th-Project/Well-dying/blob/main/chatbot/chatbot_modules/search_info.py)

<br>

---

# 💡 테스트 계획 및 결과 보고서

### 1. 인터넷 계정 관리 정보
#### 질문 1 :
사망 전 카카오톡 계정 처리 방법에는 어떤 게 있고, 어떤 기능을 제공하나요?
- 예상 답변 :
```
카카오톡에서는 생전에 추모 프로필 설정을 통해 사망 후 계정 처리를 미리 지정할 수 있습니다. 설정 위치는 카카오톡 > 설정 > 개인/보안 > 추모 프로필이며, 여기서 다음을 선택할 수 있습니다. (이하 추모 프로필 기능 설명)
```
- 실제 답변 :
```
사망 전 카카오톡 계정을 처리하는 방법과 기능은 다음과 같습니다:

1. **계정 탈퇴**: 
- 카카오톡 계정을 탈퇴하면 프로필, 친구 목록, 대화 내용, 운영 중인 오픈채팅, 구입한 아이템, 선물 받은 아이템 및 사용자가 설정한 모든 정보가 삭제됩니다. 이는 복구가 불가능합니다.
- 탈퇴는 카카오톡 앱 내에서 `전체설정 > 개인/보안 > 개인정보 관리 > 카카오톡 탈퇴` 순서로 진행할 수 있습니다.
2. **프로필 피드 데이터**:
- 계정을 탈퇴하면 사용자가 작성한 프로필 피드 데이터가 모두 삭제되며, 복구 및 백업이 불가능합니다. 백업을 원할 경우, 탈퇴 전에 `더보기 > 설정 > 개인/보안 > 개인정보 관리`에서 데이터를 백업해야 합니다.
3. **대화방 및 파일**:
- 계정을 탈퇴하면 참여 중인 모든 대화방에서 자동으로 나가며, 대화방 내에서 주고받은 사진과 파일 등 모든 정보가 즉시 삭제됩니다. 톡클라우드에 저장된 일부 데이터도 삭제되므로 필요한 파일은 탈퇴 전에 저장해야 합니다.
4. **추모 프로필 및 대리인 설정**:
- 계정을 탈퇴하면 설정된 추모 프로필과 대리인 지정이 모두 취소되며, 대리인이 보유한 권한은 즉시 해제됩니다. 관련 내용은 대리인에게 안내됩니다.
따라서, 카카오톡 계정을 사망 전에 처리하고자 한다면, 탈퇴 절차를 통해 모든 데이터를 삭제할 수 있으며, 필요한 데이터를 미리 백업하는 것이 중요합니다.
```
- 답변 소요 시간 : 9초

#### 질문 2 :
사망 전 구글 계정을 삭제하지 않으면 사후 어떻게 처리되나요?
- 예상 답변 :
```
Google 계정을 생전에 삭제하지 않고 사망 후 장기간 사용하지 않게 되면, 계정은 휴면 계정으로 간주됩니다. Google 정책에 따르면 2년 동안 계정에 로그인하거나 활동이 없으면 계정이 휴면 상태가 되고, 이후 계정과 그 안의 데이터가 삭제될 수 있습니다.
```

- 실제 답변 :
```
구글 계정은 사망 후에도 자동으로 삭제되지는 않지만, 사전에 몇 가지 조치를 통해 계정 관리가 가능합니다:
1. **사전 대비**:
- 가족과 미리 상의하여 사망 후 계정을 어떻게 처리할지 결정할 수 있습니다. 특정 계정을 유지하고 싶다면, 가족이 고객센터를 통해 계정 처리 요청을 할 수 있도록 절차를 공유하는 것이 좋습니다.
- 일부 플랫폼에서는 장기간 로그인하지 않으면 계정이 자동으로 삭제되는 기능이 있습니다. 이 기능을 검토하고 필요한 경우 설정을 조정할 수 있습니다.
2. **계정 삭제 절차**:
- 사망 전에 계정을 정리하고 싶다면, Google 계정의 '데이터 및 개인 정보 보호' 섹션에서 'Google 계정 삭제' 옵션을 통해 삭제할 수 있습니다. 계정 삭제 시 다른 계정에 영향을 주지 않으므로, 삭제하려는 계정과 유지할 계정을 구분하여 진행하면 됩니다.
이러한 방법들을 통해 사전에 대비할 수 있으며, 사후에는 가족에게 계정 처리 방법을 알려주는 것이 중요합니다.
```
- 답변 소요 시간 : 8초

### 2. 장례절차 및 장례식장 정보
#### 질문 1 :
서울 종로구에 있는 장례식장 좀 알려줘.
- 예상 답변 :
```
서울 종로구 인근의 장례식장 정보를 찾았습니다.

서울적십자병원장례식장
주소: 서울특별시 종로구 새문안로 9 (평동, 적십자병원) 
전화: 02-2002-8444

서울대학교병원장례식장
주소: 서울특별시 종로구 대학로 101, 서울대학교병원 (연건동) 
전화: 02-2072-2020

(참고: 정확한 정보 확인을 위해 방문 전 해당 시설에 전화 문의를 권장합니다.)
```

- 실제 답변 :
```
서울 종로구에 위치한 장례식장은 다음과 같습니다:
1. **서울대학교병원장례식장**
- 주소: 서울특별시 종로구 대학로 101, 서울대학교병원 (연건동)
- 전화번호: 02-2072-2020
2. **서울적십자병원장례식장**
- 주소: 서울특별시 종로구 새문안로 9 (평동, 적십자병원)
- 전화번호: 02-2002-8444
이 두 곳은 종로구 내에서 이용할 수 있는 장례식장입니다. 필요에 따라 연락하여 시설 이용에 관한 자세한 정보를 얻으시길 바랍니다.
```
- 답변 소요 시간 : 5초

#### 질문 2 : [사용자 질문 - 사용자의 위치(대구)를 기억한다는 전제]
근처에 화장터가 어디 있어?
- 예상 답변 :
```
대구광역시 인근의 화장 시설 정보를 찾아보았습니다.

대구명복공원 
주소: 대구광역시 수성구 달구벌대로541길 47 (고모동) 
전화: 053-743-3880

(참고: 정확한 예약 현황이나 비용은 해당 시설에 직접 문의하시기 바랍니다.)
```

- 실제 답변 :
```
대구광역시에서 이용할 수 있는 화장시설은 다음과 같습니다:
- **대구명복공원**
- 주소: 대구광역시 수성구 달구벌대로541길 47 (고모동)
- 전화번호: 053-743-3880
- 시설 유형: 화장시설
대구명복공원은 대구 수성구에 위치한 화장시설로, 관련된 문의나 이용을 원하실 경우 위의 연락처로 문의해 보시기 바랍니다.
```
- 답변 소요 시간 : 6초

### 3. 장례 관련 조례 정보
#### 질문 1 :
나는 아는 사람이 없는데 내가 죽으면 내 장례는 어떻게 치뤄줄까?
- 예상 답변 :
```
한국에서는 연고자가 없는 사람이 사망하면,
고인의 **주민등록지 지자체가 ‘무연고자 장례(공영장례)’**를 진행합니다.
절차는 다음과 같습니다:
연고자 탐색 후 ‘무연고’ 확정
지자체가 장례 주관(운구·간소 장례·화장)
유골은 봉안당 또는 자연장지에 안치
비용은 지자체 조례 기준으로 대부분 공공 부담
즉, 지인이 없어도 지자체가 법에 따라 장례를 책임지고 처리합니다.
```

- 실제 답변 :
```
아는 사람이 없는 경우에도 장례를 치를 수 있는 방법이 있습니다. 정부와 지자체에서는 무연고자의 장례를 지원하는 제도를 운영하고 있습니다. 다음은 일반적으로 무연고자 장례에 해당할 수 있는 절차입니다:
1. **무연고자 확인**:
- 사망자가 무연고자로 확인되면, 관할 지자체에서 장례 절차를 진행하게 됩니다.
2. **공영장례 지원**:
- 많은 지자체에서는 무연고자를 위한 공영장례 지원을 제공하고 있습니다. 이 경우, 지자체에서 장례 절차를 진행하며, 화장 후 유골을 보관하거나 자연장지에 안치하는 방식으로 마무리됩니다.
3. **화장 및 봉안**:
- 대부분의 경우, 무연고자의 시신은 화장된 후, 지자체에서 관리하는 봉안당이나 납골당에 안치되거나, 자연장으로 처리됩니다.
4. **지자체와의 협력**:
- 무연고자 장례는 지자체와 협력하여 진행되므로, 사망 시 거주하고 있는 지역의 지자체에 문의하거나 관련 정보를 미리 파악해 두는 것이 좋습니다.
무연고자 장례는 최소한의 존엄을 유지하며 진행되도록 노력하고 있으며, 관련하여 더 궁금한 사항이 있거나 구체적인 정보가 필요하다면 해당 지자체의 복지 담당 부서에 문의하시면 도움을 받을 수 있습니다.
```
- 답변 소요 시간 : 11초

#### 질문 2 :
공영장례 그게 뭐야? 내가 그걸 받을 수 있어?
- 예상 답변 :
```
공영장례는 연고자가 없을 때 지자체가 비용을 부담해 장례·화장·안치를 진행하는 제도입니다.
일반적으로 다음과 같은 경우에 지원 대상이 됩니다.
1. 시 내에서 사망한 「장사 등에 관한 법률」 제12조제1항의 무연고 사망자 및 「장사 등에 관한 법률」
 제2조제16호에 따른 연고자가 시신 인수를 거부ㆍ기피한 무연고 사망자. 다만, 「의료급여법」 제3조
 제1항 및 「국민기초생활 보장법」 제7조제1항에 따라 관리하던 자가 사망한 경우에는 사망 장소와
 관계없이 장례를 지원할 수 있다. 2. 사망 시, 시에 주민등록을 둔 자로 「국민기초생활 보장법」, 「긴급복지지원법」 및 「서울특별시 주민
 생활안정지원에 관한 조례」에 따른 장제급여 수급자 및 차상위 계층으로 연고자가 장례처리 능력이
 없는 경우
3. 사망 시, 시에 주민등록을 둔 자로서 「서울특별시 고독사 예방 및 사회적 고립가구 안전망 확충을
 위한 조례」 제2조제1호에 따른 고독사로서 구청장ㆍ동장ㆍ마을공동체에서 장례를 치르는 경우
4. 「서울특별시 아동학대 예방ㆍ방지 및 피해아동 보호에 관한 조례」 제2조제2호에 따른 아동학대로
 인하여 사망한 경우로 연고자가 구속ㆍ가족관계 단절 등의 사유로 장례를 치를 수 없는 경우
5. 시장 또는 구청장이 장례지원이 필요하다고 인정하는 경우

정확한 안내를 위해 거주하시는 시/군/구를 말씀해 주시겠어요?
```

- 실제 답변 :
```
공영장례는 주로 무연고자나 장례를 치를 수 없는 상황에 있는 사람들을 위해 지자체에서 제공하는 장례 지원 서비스입니다. 공영장례의 대상과 지원 내용은 지역에 따라 다를 수 있지만, 일반적으로 다음과 같은 경우에 지원이 가능합니다:
### 지원대상
1. **무연고자**:
- 연고자가 없거나 연고자를 알 수 없는 무연고자.
2. **가족관계 단절**:
- 연고자가 가족관계 단절 등으로 시신 인수를 거부하거나 기피하는 경우.
3. **장례 절차 진행 능력 부족**:
- 연고자가 미성년자 또는 심한 장애인 등으로만 구성되어 있어 장례 절차를 진행할 능력이 없는 경우.
4. **기타 필요성 인정**:
- 그 밖에 공영장례 지원이 필요하다고 지자체장이 인정하는 경우.
### 지원내용\n- 수의, 관 등 장례에 필요한 용품 또는 비용.
- 시체검안비, 운반비, 영안실 안치료.
- 장의차량, 장례식장, 화장시설 사용료.
- 추모의식에 필요한 경비 등.
### 신청 및 결정
- 공영장례 지원을 받고자 하는 경우, 지원 신청서를 지자체에 제출해야 합니다. 지자체는 신청서를 검토하여 지원 여부를 결정합니다.
공영장례는 사망자의 마지막을 존엄 있게 마무리할 수 있도록 지원하는 제도이며, 본인이 해당할 수 있을지에 대한 구체적인 사항은 거주하시는 지역의 지자체에 문의하여 확인하실 수 있습니다.
```
- 답변 소요 시간 : 14초

### 4. 유산상속 관련 법률 기반 정보
#### 질문 1 :
유산 상속에도 우선순위가 있어?
- 예상 답변 :
```
1순위는 직계비속, 2순위는 직계존속, 그다음 형제자매, 이후 4촌 이내 방계혈족 순입니다.
배우자는 1순위 또는 2순위 상속인과 공동상속인이 되며, 다른 상속인이 없으면 단독으로 상속합니다.
```
- 실제 답변 :
```
유산 상속에는 법에 의해 정해진 우선순위가 존재합니다. 일반적으로 다음과 같은 순서에 따라 상속이 이루어집니다:
1. **배우자와 직계비속**:
- 가장 먼저 배우자와 직계비속(자녀)이 상속 대상이 됩니다. 배우자는 직계비속과 함께 동일한 비율로 상속받으며, 자녀가 여럿인 경우 자녀들 간에 균등하게 나누어 상속됩니다.
2. **배우자와 직계존속**:
- 직계비속이 없는 경우, 배우자와 직계존속(부모)이 상속받습니다. 이 경우 배우자는 직계존속과 동일한 비율로 상속받으며, 부모가 여럿인 경우 부모 간에 균등하게 나누어 상속됩니다.
3. **형제자매**:
- 직계비속과 직계존속이 없는 경우, 형제자매가 상속받습니다. 이 때 상속분은 균등하게 나누어집니다.
4. **배우자 단독 상속**:
- 직계비속, 직계존속 및 형제자매가 모두 없는 경우에는 배우자가 단독으로 상속받습니다.
이러한 법적 우선순위는 유언이 없는 경우에 적용됩니다. 만약 피상속인이 유언을 남겼다면, 유언에 따른 상속이 우선됩니다.
```
- 답변 소요 시간 : 10초

#### 질문 2 :
유산상속 절차를 요약해줘.
- 예상 답변 :
```
피상속인의 사망으로 절차가 시작됩니다. 상속인은 3개월 이내에 상속의 승인(단순/한정)이나 포기를 법원에 신고해야 합니다. 이후 유언이나 공동상속인 간의 협의에 따라 재산을 분할합니다.
```
- 실제 답변 :
```
유산상속 절차는 일반적으로 다음과 같은 단계로 진행됩니다:
1. **상속 개시**:
- 피상속인이 사망하면 상속이 개시됩니다. 상속 개시일은 피상속인의 사망일입니다.
2. **상속인의 확정**:
- 법정상속인이나 유언장에 따른 상속인을 확정합니다. 법정상속인은 민법에 따라 배우자, 직계비속, 직계존속, 형제자매 등의 순서로 결정됩니다.
3. **상속재산 파악**:
- 상속재산에는 부동산, 예금, 주식, 채권 등의 자산과 채무가 포함됩니다. 상속인은 피상속인의 재산 목록을 작성하고 평가해야 합니다.
4. **상속재산 분할**:
- 상속인 간에 상속재산을 어떻게 나눌지 협의합니다. 만약 협의가 되지 않을 경우 법원의 조정을 받을 수 있습니다.
5. **상속세 신고 및 납부**:
- 상속 재산의 가액에 따라 상속세를 신고하고 납부해야 합니다. 상속세 과세가액은 상속재산의 가액에서 일정 금액을 공제한 후 계산됩니다. 상속세는 사망일로부터 6개월 이내에 신고해야 하며, 연장 신청이 가능합니다.
6. **상속재산 분배**:
- 상속세를 납부한 후, 상속재산을 분배합니다. 여기에는 부동산의 명의 변경, 예금 인출 등이 포함될 수 있습니다.
이 과정에서 주의할 점은 상속세의 신고 및 납부 기한을 준수해야 하며, 상속인 간의 협의를 통해 분쟁을 최소화하는 것이 중요합니다.
```
- 답변 소요 시간 : 8초

### 5. 감성적인 대화
#### 질문 1 :

사실 요즘 몸이 너무 무겁고, 뭘 해보고 싶다는 생각도 잘 안 들어요…

- 예상 답변 :
```
많이 지치신 것 같아요. 몸과 마음이 무거울 때는 정말 아무 것도 하기 싫을 때가 있죠. 혹시 괜찮으시다면, 실내에서 조금씩 할 수 있는 작은 활동을 찾아보는 것도 도움이 될 수 있을 것 같아요. 지금처럼 이야기를 이어가도 괜찮습니다.
```
- 실제 답변 :
```
마음이 많이 지치신 것 같아요. 그런 날들이 있죠. 혹시 누워 계시면서도 편안함을 느꼈던 순간이 있으셨나요? 함께 작은 기쁨을 찾아보면 어떨까요?
```
- 답변 소요 시간 : 1초

#### 질문 2 :
주말에 할 수 있는 일을 하나 추천해주세요.
- 예상 답변 :
```
혹시 괜찮으시다면, 주말에 가족이나 친구와 함께 시간을 보내보는 건 어떨까요? 가까운 사람들과의 시간을 통해 조금이나마 마음의 평온을 찾으실 수 있을지도 몰라요. 부담 없으시다면, 손주나 친구와의 시간을 한번 계획해 보세요. 물론, 그냥 편안히 이야기를 나누는 것도 좋습니다.
```
- 실제 답변 :
```
혹시 괜찮으시다면, 주말에는 편안한 자세로 누워서 잡지를 읽어보시는 건 어떠세요? 마음이 조금은 가벼워지실 수도 있을 거예요. 부담 없이 편하게 쉬시는 것도 좋습니다.
```
- 답변 소요 시간 : 4초



---
# 🐛 트러블슈팅

### 검색 결과 부정확

-  주소별 벡터값의 차이가 작아 주소를 잘 못 잡아오는 문제

   → 필터 적용(지역) : get_close_matches 사용 단어 유사도 검사 후, 지역 리스트 속에서 찾아서 그것으로 필터 적용

-  지역 필터와 시설구분(시설별 지역목록 차이 존재)을 함께 쓸 경우 굳이 벡터 DB를 사용할 이유가 없어진다.

   → 충분히 많은 양의 지역을 get_close_matches 함수를 통해 가져오고 그것을 한 번의 필터(지역)만을 사용해 검색하는 방향으로 진행. 시설은 벡터 유사도로 알아서 분리.

- 특정(종교 기반) 장례 시설 검색 문제(유사도 검색) : 종교 관련 장례 시설 등의 특수한 시설을 검색하는 데 있어 적절한 검색 성능이 나오지 않는 문제

   → page_content 수정 : 장례 시설의 이름에서 특수 키워드(예 : 천주교)가 있을 경우 그러한 시설임을 내용에 추가하는 방식으로 해결. 이때 추가한 특수 상황은 종교와 공/사설 구분이다.

### 구분 없는 표 형식 텍스트 추출 문제(텍스트 추출)  

- pdf 리더가 위에서 아래로 한 줄씩 읽는 방식이라 글자가 섞여서 출력

   → OCR 사용 : PDF reader 라이브러리와 크게 다를 게 없었음. 클로바 general ocr 사용
   → 직접 손으로 드래그 + ctrl C + ctrl V : PDF어플리케이션의 경우 적절히 텍스트를 묶어주어 이것으로 해결.

### RAG 응답 정확도 개선(프롬프트 기반)	

- 질의에 대응하는 청크를 정확히 참조하지 못해 응답 품질이 떨어지는 문제가 발견

   → 프롬프트 템플릿을 재설계하고 시스템 메시지·지시문을 세분화한 뒤, 여러 유형의 질문으로 반복 검증하여 모델이 의도한 데이터 기반 응답을 안정적으로 생성하도록 해결.

### 데이터 청크 문제

- 전처리한 몇몇 데이터 중 정확한 청크가 Top-K 안에 안 뜨는 문제가 계속됨.

   → 청크 분할이 잘못되어 단계 정보(step_01, step_02)가 서로 다른 파일에 흩어져 있었음. 원문을 step 단위로 다시 청킹하고 관련 문장끼리 하나의 chunk_id로 묶음.

<br>

---

# 🤖 수행결과(시연 페이지)

<img src="data/image/preview_image1.png" width="300"> <img src="data/image/preview_image2.png" width="300">

<br>

---

# ✒️ 한 줄 회고

| 이름 | 회고 |
|----------|-------------|
| 배상준 | 사람을 위로해주는 챗봇이라는 주제가 매우 신선한 경험이었고, '감성적인' 서비스를 제공하기 위해 LLM에게 무엇이 필요한지를 깊게 고민해볼 수 있는 프로젝트였습니다. 수치화하기 어려운 사용자의 어투나 성향 등의 요소를 프롬프트와 알고리즘적으로 판별하기 위해 다양한 시도를 해보는게 재미있었습니다. |
| 박소희 | 평소에 깊게 생각하지 못했던 주제에 대해 깊게 생각해 볼 수 있는 계기가 되었던 것 같습니다. 대화 탭을 구현하며, 어떻게 사용자에 맞춰서 최적의 경험을 제공할 수 있을까 고민해볼 수 있는 뜻 깊은 프로젝트였습니다. 중요 단어를 골라와 유사도 검색으로 관련있는 질문을 뽑아볼 수 있게 했는데 해당 경험이 기억에 많이 남습니다. |
| 이승원 | 벡터 유사도를 통한 검색의 한계를 알 수 있었고, 이를 해결하기 위해 filter(parameter)활용, 2번 검색, page_content 수정 등 다양한 방법을 사용해 볼 수 있었다. LLM이 Tool을 잘 사용하도록 프롬프팅과 docstring 수정에서 실험적 시도를 할 수 있었다. |
| 김성욱 | 3차 프로젝트를 진행하며 팀원들의 친절한 배려 속에서 즐겁게 배우고 성장할 수 있었고, 특히 각자 데이터 수집 과정을 분담해 진행한 점이 큰 도움이 되었습니다. 또한 개인 아이디어 제안 시에는 말로만 전달하던 내용을 문서화해 제출하면서 부족했던 부분을 보완할 수 있었고, 이번 경험을 통해 유저 관점에서 깊이 고민하는 계기가 되었습니다. |
| 박진형 | 디지털 유산이라는 항목에 흥미가 있어 조사했으나, 국내 서비스 중 유의미한 데이터가 많이 없어 아쉬웠다. RAG의 장점을 잘 살릴 수 있는 LLM 챗봇 완성을 위해 다른 데이터를 찾아 보완하겠다고 계획하고, 문답 파이프라인 설계 과정에서 테스트를 많이 진행해 결과물에 오류가 없게 해야겠다고 다짐했다. |

