> SK네트웍스 Family AI 캠프 21기 3차 프로젝트  
> 개발기간: 26.01.07 ~ 26.01.08 <br>
> 주제 : RAG 기반 챗봇 개발

<br>

# 🖐️ 팀 소개

- ## 팀명 : **이명준(님) 짝꿍 구하기**
- ### 팀원 소개 :

<div align="center">
	
| [@김승룡] | [@정덕규] | [@이의정] | [@진승언] | [@이명준] |
| :----------------------------------------: | :----------------------------------------: | :----------------------------------------: | :----------------------------------------: | :----------------------------------------: |
| <img src="data/image/BSJ.png" width="120"> | <img src="data/image/PSH.png" width="120"> | <img src="data/image/LSW.png" width="120"> | <img src="data/image/KSU.png" width="120"> | <img src="data/image/PJH.png" width="120"> |

</div>

<br>

---

# 📖 프로젝트 개요

##  주제 : 선사시대부터 가장 중요했던 연애!, <br> 어떻게 하면 더 나은 연애를 할 수 있을지 상담해주는 AI 기반의 '연애 상담' 챗봇 서비스

- ###  **프로젝트 소개**

"**명준(님) 짝꿍구하기**"는 사용자의 연애에 대한 고민을 상담해주는 AI 대화형 챗봇 서비스입니다.  
**연애를 하면서 생기는 다양한 상황과 질문에 대한 답변를 RAG 기반으로 안내**하며  
**사용자가 선호하는 연애 유튜버의 말투로 답변**합니다.

- ###  **프로젝트 배경**

"연애를 하다보면, 또는 연애를 시작하려고 하면<br>
남들에게 물어보기도 어려운 다양한 상황에 직면하게 됩니다.<br>
이럴 때 저희 AI 챗봇에 물어보면 됩니다.."<br>

## 관련 기사

### ■ 모쏠 공대남, 5천명과 미팅 후 결혼까지…챗GPT가 다 했다


<img src="[data/image/news1.png](https://www.asiae.co.kr/news/img_view.htm?img=2024020108320550685_1706743925.jpg)">

- 러시아 개발자, AI로 '데이트 최적화' 프로포즈, 결혼 계획까지 AI에 맡겨

[https://www.asiae.co.kr/article/2024020110103092016](https://www.asiae.co.kr/article/2024020110103092016)
##### 출처: 아시아경제

<br>

#### => 연애는 하고 싶지만, 어떻게 해야할지 모르고, 어떤 얘기를 해야할지 모르겠는 사람이 많음.
	
### "이러한 배경에서 저희는 **연애 전문가(연애 유튜브)의 말투로 상황에 따른 대답을 해주는 AI 챗봇의 필요성**을 느끼고 도움을 줄 수 있는 챗봇을 구상하게 되었습니다."

- ### **프로젝트 목표**

1.  **핵심 정보 제공**: 연애하면서 맞닥뜨리게 되는 다양한 상황에 대한 대처법을 정확하게 답변해줌
    
2.  **맞춤형 대화**: 감정·기억을 반영한 개인화된 상담 제공
    
3.  **RAG 기반 정확성 향상**: GPT-4o-mini + Qdrant으로 근거 기반 답변 생성
    
4.  **명준(님), 의정(님) 짝꿍 구하기**: 명준(님)과 의정(님)의 여자친구, 남자친구를 구하는 것이 최종적인 프로젝트의 목적 입니다.

<br>

---

# 💻 기술 스택 & 사용한 모델  

| 분야                | 사용 도구 |
|---------------------|-----------|
| **Language**        | [![Python](https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=Python&logoColor=white)](https://www.python.org/) |
| **Collaboration Tool** | [![Git](https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=git&logoColor=white)](https://git-scm.com/) [![GitHub](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white)](https://github.com/) [![Discord](https://img.shields.io/badge/Discord-5865F2?style=for-the-badge&logo=discord&logoColor=white)](https://discord.com/) |
| **LLM Model**       | [![GPT-4o](https://img.shields.io/badge/GPT--4o-mini%20-412991?style=for-the-badge&logo=openai&logoColor=white)](https://platform.openai.com/) 
| **Embedding Model** | [![text-embedding-3-small](https://img.shields.io/badge/text--embedding--3--small-00A67D?style=for-the-badge&logo=openai&logoColor=white)](https://platform.openai.com/docs/guides/embeddings) |
| **Vector DB**       | [![Pinecone](https://img.shields.io/badge/qdrant-0075A8?style=for-the-badge&logo=qdrant&logoColor=white)](https://qdrant.tech/) |
| **Orchestration / RAG** | [![LangChain](https://img.shields.io/badge/LangChain-1C3C3C?style=for-the-badge&logo=langchain&logoColor=white)](https://www.langchain.com/) |
| **Development Env** | [![VS Code](https://img.shields.io/badge/VS%20Code-007ACC?style=for-the-badge&logo=visualstudiocode&logoColor=white)](https://code.visualstudio.com/) [![Conda](https://img.shields.io/badge/Conda-3EB049?style=for-the-badge&logo=anaconda&logoColor=white)](https://www.anaconda.com/)

<br>

---

# 🪢시스템 아키텍처

### 프로젝트 구조

<img src="https://discord.com/channels/1455821809193713686/1455836066329264191/1458260754330292443">

<br>


### 시스템 아키텍처 구조도
![시스템 아키텍처]()




<br>

---

# 🗃️ 수집한 데이터 및 전처리 요약

### 수집한 데이터 목록
연애 유튜버들의 영상 URL 링크 수집.
#### 데이터 수집한 연애 유튜버 이름
- 권승현
- 오늘의 주우재
- 강탱의 이야기
- 연애언어 TV
- 김달

### 전처리 요약
**데이터 수집 방법** : 각 연애 유튜버들의 채널을 방문하여 영상을 클릭한 후, 영상들의 URL 링크들을 불러옴.<br>
불러온 링크들을 이용하여 유튜브 영상들을 사운드 파일로 다운로드 한 후, json 포맷으로 용도에 맞게 변환

<br>

---

# 💾DB 연동

Vectorstore는 수업 시간에 배운 Qdrant를 이용

<br>

---

# 💡 테스트 계획 및 결과 보고서

### 유튜버 선택 및 테스트
같은 질문에 대해, 선택한 유튜브에 따라 다른 답변변
#### 질문 : 여자친구가 화났을 때 풀어주는 방법 추천해줘
##### 답변 1 - 권승현 스타일 답변
지금 상황은 여자친구가 화가 난 상태야. 

그녀가 화난 이유는 뭔가 너한테 실망했거나, 불만이 쌓였다는 거야. 이건 그냥 감정이 아니라, 너한테 뭔가를 요구하고 있다 는 신호야. 화가 난 사람은 대개 자신의 감정을 표현하고 싶어 하거든.

이 상황은 너한테 불리해. 여자친구가 화가 나면, 너는 그녀의 감정을 다루는 데 더 많은 에너지를 써야 해. 그리고 그녀가 불만을 품고 있으면, 너는 그 불만을 해소하기 위해 더 많은 노력을 해야 할 수도 있어.

지금 이대로 가면, 그녀의 불만이 쌓여서 관계가 더 나빠질 수 있어. 결국에는 서로의 감정이 더 상하게 될 거고, 그럼 너도  힘들어질 거야.

그래서 지금 당장 해야 할 행동은, 그녀와 진지하게 대화하는 거야. "무슨 일인지 말해줘"라고 솔직하게 물어봐. 그녀의 감정 을 듣고, 그에 대해 진지하게 반응해줘. 이건 단순한 대화가 아니라, 너의 진정성을 보여주는 기회야.

##### 답변 2 - 김달 스타일 답변
여자친구가 화났을 때, 그 감정이 어떤 것인지 먼저 살펴보는 것이 중요합니다. 화가 나면 보통 불안, 서운함, 혹은 상처받은 감정이 뒤섞여 있을 수 있어요. 이런 감정은 그 상황에서 충분히 생길 수 있는 자연스러운 반응입니다.

여자친구가 화가 난 이유는 여러 가지가 있을 수 있습니다. 예를 들어, 당신의 말이나 행동이 그녀에게 상처를 주었거나, 혹은 그녀가 기대했던 것과 다른 상황이 발생했을 수도 있죠. 이런 맥락을 이해하는 것이 중요합니다. 그녀의 감정이 왜 생겼는지 를 생각해보면, 그 상황을 좀 더 잘 이해할 수 있을 거예요.

만약 이런 감정이 오래 지속된다면, 그녀는 점점 더 지치고, 관계에 대한 불신이 생길 수 있습니다. 그래서 지금 이 순간, 그 녀의 감정을 진지하게 받아들이고, 그에 대해 이야기하는 것이 필요합니다.

여자친구에게 다가가서, 그녀의 기분을 물어보는 것이 좋습니다. "무슨 일이 있었는지 이야기해줄 수 있어?"라고 부드럽게 물 어보면, 그녀가 마음을 열고 이야기할 수 있는 기회를 줄 수 있습니다. 이때, 당신이 그녀의 감정을 존중하고 이해하려는 태도를 보이는 것이 중요해요.

마지막으로, 이 관계가 당신에게 안전한지 스스로에게 질문해보세요. 그녀의 감정이 당신에게 어떤 영향을 미치고 있는지, 그 리고 당신이 그녀의 감정을 어떻게 받아들이고 있는지를 생각해보는 것이 필요합니다. 이런 과정을 통해 서로의 마음을 더 잘 이해할 수 있을 거예요.

---
# 시스템 프롬프트 작성
각 유튜버 별로 시스템 프롬프트를 만들고,<br>
전체적인 챗봇의 시스템 프롬프트를 만든 후,<br>
사용자가 유튜버를 선택하면, 해당 유튜버의 말투로 답변해주도록 함.
## 말투를 참고하기 위해 적용한 유튜버 목록
- 권승현
- 오늘의 주우재
- 강탱의 이야기
- 연애언어 TV
- 김달
- 랄라브루스
- 준우
- 박코
- 모두의지인
- 김유신
- 오은영 박사
- 홍차 TV
- 마튜브
<br>
chatgpt에게 시스템 프롬프트를 만들어 달라고 하면서, 프롬프트를 고도화.

## 답변 시 반영할 유튜버의 요소
- 성격 및 태도
- 말투 (존댓말 / 반말 여부)
- 자주 사용하는 단어와 표현
- 사고방식과 세계관
- 논리 전개 구조
- 예시 및 상황 설명 방식
- 비유 스타일
- 조언 방식과 결론 처리


---
# 🐛 트러블슈팅

### qdrant와 Langchain 의 DB 저장 및 조회 방식의 차이때문에 생겨난 에러
- 해결 방법 1. DB의 payload를 metadata라는 키로 묶는 랩핑으로 해결.
- 해결 방법2. langchain 의 load 함수를 쓰지 않고, qdrant api에서 불러오고 document 생성 폼에 맞게 객체 수정
- 해결 방법1의 시간비용과 llm api 호출 비용때문에 해결방법 2로 시도
### 답변이 지나치게 딱딱하고 로봇스러움
- 해결방법 1. 프롬프트 템플릿에 연애 유튜버나상담가 등 대중적으로 유명한 사람의 이름을 명시하여 유명인의 어투를 따라할 수 있게함.
- 해결방법 2. 프롬프트 템플릿에 사람과 대화할 때 사용하는 말투를 쓰라고 명시하여, 답변의 뉘앙쓰를 바꿈.
## chatgpt가 해당 유튜버를 잘 모름<br>
chatgpt를 이용하여 해당 유튜버들에 대한 시스템 프롬프트 생성시,<br>
권승현, 주우재, 김달은 chatgpt가 알고 있었지만,<br>
다른 유튜버들을 chatgpt가 잘 몰라서,(질문시 유튜버에 대해 모르면 모른다고 답변하라고 함)<br>
해당 유튜브의 채널에 있는 동영상에서 스크립트를 하나 다운받아서,<br>
스크립트도 같이 입력하여 해당 유튜버에 대한 시스템 프롬프트 생성

<br>

---

# 🤖 수행결과(시연 페이지)


<br>

---

# ✒️ 한 줄 회고

| 이름 | 회고 |
|----------|-------------|
| 김승룡 |  |
| 정덕규 |  |
| 이의정 |  |
| 진승언 |  |
| 이명준 |  |






